{
  "description": "Request model for consensus workflow steps",
  "properties": {
    "model": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Model to use. See tool's input schema for available models and their capabilities. Use 'auto' to let Claude select the best model for the task.",
      "title": "Model"
    },
    "temperature": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Temperature"
    },
    "thinking_mode": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Thinking Mode"
    },
    "use_websearch": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Use Websearch"
    },
    "continuation_id": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools.",
      "title": "Continuation Id"
    },
    "images": {
      "anyOf": [
        {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Optional list of image paths or base64 data URLs for visual context. Useful for UI/UX discussions, architecture diagrams, mockups, or any visual references that help inform the consensus analysis.",
      "title": "Images"
    },
    "step": {
      "description": "Describe your current consensus analysis step. In step 1, provide your own neutral, balanced analysis of the proposal/idea/plan after thinking carefully about all aspects. Consider technical feasibility, user value, implementation complexity, and alternatives. In subsequent steps (2+), you will receive individual model responses to synthesize. CRITICAL: Be thorough and balanced in your initial assessment, considering both benefits and risks, opportunities and challenges.",
      "title": "Step",
      "type": "string"
    },
    "step_number": {
      "description": "The index of the current step in the consensus workflow, beginning at 1. Step 1 is your analysis, steps 2+ are for processing individual model responses.",
      "title": "Step Number",
      "type": "integer"
    },
    "total_steps": {
      "description": "Total number of steps needed. This equals the number of models to consult. Step 1 includes your analysis + first model consultation on return of the call. Final step includes last model consultation + synthesis.",
      "title": "Total Steps",
      "type": "integer"
    },
    "next_step_required": {
      "description": "Set to true if more models need to be consulted. False when ready for final synthesis.",
      "title": "Next Step Required",
      "type": "boolean"
    },
    "findings": {
      "description": "In step 1, provide your comprehensive analysis of the proposal. In steps 2+, summarize the key points from the model response received, noting agreements and disagreements with previous analyses.",
      "title": "Findings",
      "type": "string"
    },
    "files_checked": {
      "anyOf": [
        {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "title": "Files Checked"
    },
    "relevant_files": {
      "anyOf": [
        {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "description": "Files that are relevant to the consensus analysis. Include files that help understand the proposal, provide context, or contain implementation details.",
      "title": "Relevant Files"
    },
    "relevant_context": {
      "anyOf": [
        {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "title": "Relevant Context"
    },
    "issues_found": {
      "anyOf": [
        {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "title": "Issues Found"
    },
    "confidence": {
      "default": "exploring",
      "description": "Not used",
      "title": "Confidence",
      "type": "string"
    },
    "hypothesis": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Hypothesis"
    },
    "backtrack_from_step": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Backtrack From Step"
    },
    "use_assistant_model": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "null"
        }
      ],
      "default": true,
      "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation.",
      "title": "Use Assistant Model"
    },
    "models": {
      "anyOf": [
        {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "List of model configurations to consult. Each can have a model name, stance (for/against/neutral), and optional custom stance prompt. The same model can be used multiple times with different stances, but each model + stance combination must be unique. Example: [{'model': 'o3', 'stance': 'for'}, {'model': 'o3', 'stance': 'against'}, {'model': 'flash', 'stance': 'neutral'}]",
      "title": "Models"
    },
    "current_model_index": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": 0,
      "description": "Internal tracking of which model is being consulted (0-based index). Used to determine which model to call next.",
      "title": "Current Model Index"
    },
    "model_responses": {
      "anyOf": [
        {
          "items": {
            "additionalProperties": true,
            "type": "object"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "description": "Accumulated responses from models consulted so far. Internal field for tracking progress.",
      "title": "Model Responses"
    }
  },
  "required": [
    "step",
    "step_number",
    "total_steps",
    "next_step_required",
    "findings"
  ],
  "title": "ConsensusRequest",
  "type": "object"
}
