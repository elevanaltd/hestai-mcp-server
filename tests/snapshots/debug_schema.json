{
  "description": "Request model for debug investigation steps matching original debug tool exactly",
  "properties": {
    "model": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Model to use. See tool's input schema for available models and their capabilities. Use 'auto' to let Claude select the best model for the task.",
      "title": "Model"
    },
    "temperature": {
      "anyOf": [
        {
          "type": "number"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Temperature"
    },
    "thinking_mode": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Thinking Mode"
    },
    "use_websearch": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Use Websearch"
    },
    "continuation_id": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Thread continuation ID for multi-turn conversations. When provided, the complete conversation history is automatically embedded as context. Your response should build upon this history without repeating previous analysis or instructions. Focus on providing only new insights, additional findings, or answers to follow-up questions. Can be used across different tools.",
      "title": "Continuation Id"
    },
    "images": {
      "anyOf": [
        {
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "Optional list of absolute paths to screenshots or UI visuals that clarify the issue. Only include if they materially assist understanding or hypothesis formulation.",
      "title": "Images"
    },
    "step": {
      "description": "Describe what you're currently investigating by thinking deeply about the issue and its possible causes. In step 1, clearly state the issue and begin forming an investigative direction after thinking carefullyabout the described problem. Ask further questions from the user if you think these will help with yourunderstanding and investigation. CRITICAL: Remember that reported symptoms might originate from code far from where they manifest. Also be aware that after thorough investigation, you might find NO BUG EXISTS - it could be a misunderstanding or expectation mismatch. Consider not only obvious failures, but also subtle contributing factors like upstream logic, invalid inputs, missing preconditions, or hidden side effects. Map out the flow of related functions or modules. Identify call paths where input values or branching logic could cause instability. In concurrent systems, watch for race conditions, shared state, or timing dependencies. In all later steps, continue exploring with precision: trace deeper dependencies, verify hypotheses, and adapt your understanding as you uncover more evidence.",
      "title": "Step",
      "type": "string"
    },
    "step_number": {
      "description": "The index of the current step in the investigation sequence, beginning at 1. Each step should build upon or revise the previous one.",
      "title": "Step Number",
      "type": "integer"
    },
    "total_steps": {
      "description": "Your current estimate for how many steps will be needed to complete the investigation. Adjust as new findings emerge.",
      "title": "Total Steps",
      "type": "integer"
    },
    "next_step_required": {
      "description": "Set to true if you plan to continue the investigation with another step. False means you believe the root cause is known or the investigation is complete.",
      "title": "Next Step Required",
      "type": "boolean"
    },
    "findings": {
      "description": "Summarize everything discovered in this step. Include new clues, unexpected behavior, evidence from code or logs, or disproven theories. Be specific and avoid vague language\u2014document what you now know and how it affects your hypothesis. IMPORTANT: If you find no evidence supporting the reported issue after thorough investigation, document this clearly. Finding 'no bug' is a valid outcome if the investigation was comprehensive. In later steps, confirm or disprove past findings with reason.",
      "title": "Findings",
      "type": "string"
    },
    "files_checked": {
      "description": "List all files (as absolute paths, do not clip or shrink file names) examined during the investigation so far. Include even files ruled out, as this tracks your exploration path.",
      "items": {
        "type": "string"
      },
      "title": "Files Checked",
      "type": "array"
    },
    "relevant_files": {
      "description": "Subset of files_checked (as full absolute paths) that contain code directly relevant to the issue. Only list those that are directly tied to the root cause or its effects. This could include the cause, trigger, or place of manifestation.",
      "items": {
        "type": "string"
      },
      "title": "Relevant Files",
      "type": "array"
    },
    "relevant_context": {
      "description": "List methods or functions that are central to the issue, in the format 'ClassName.methodName' or 'functionName'. Prioritize those that influence or process inputs, drive branching, or pass state between modules.",
      "items": {
        "type": "string"
      },
      "title": "Relevant Context",
      "type": "array"
    },
    "issues_found": {
      "description": "Issues identified with severity levels during work",
      "items": {
        "additionalProperties": true,
        "type": "object"
      },
      "title": "Issues Found",
      "type": "array"
    },
    "confidence": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": "low",
      "description": "Indicate your current confidence in the hypothesis. Use: 'exploring' (starting out), 'low' (early idea), 'medium' (some supporting evidence), 'high' (strong evidence), 'very_high' (very strong evidence), 'almost_certain' (nearly confirmed), 'certain' (100% confidence - root cause and minimal fix are both confirmed locally with no need for external model validation). Do NOT use 'certain' unless the issue can be fully resolved with a fix, use 'very_high' or 'almost_certain' instead when not 100% sure. Using 'certain' means you have complete confidence locally and prevents external model validation. Also do NOT set confidence to 'certain' if the user has strongly requested that external validation MUST be performed.",
      "title": "Confidence"
    },
    "hypothesis": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "A concrete theory for what's causing the issue based on the evidence so far. This can include suspected failures, incorrect assumptions, or violated constraints. VALID HYPOTHESES INCLUDE: 'No bug found - possible user misunderstanding' or 'Symptoms appear unrelated to any code issue' if evidence supports this. When no bug is found, consider suggesting: 'Recommend discussing with thought partner/engineering assistant for clarification of expected behavior.' You are encouraged to revise or abandon hypotheses in later steps as needed based on evidence.",
      "title": "Hypothesis"
    },
    "backtrack_from_step": {
      "anyOf": [
        {
          "type": "integer"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "description": "If an earlier finding or hypothesis needs to be revised or discarded, specify the step number from which to start over. Use this to acknowledge investigative dead ends and correct the course.",
      "title": "Backtrack From Step"
    },
    "use_assistant_model": {
      "anyOf": [
        {
          "type": "boolean"
        },
        {
          "type": "null"
        }
      ],
      "default": true,
      "description": "Whether to use assistant model for expert analysis after completing the workflow steps. Set to False to skip expert analysis and rely solely on Claude's investigation. Defaults to True for comprehensive validation.",
      "title": "Use Assistant Model"
    }
  },
  "required": [
    "step",
    "step_number",
    "total_steps",
    "next_step_required",
    "findings"
  ],
  "title": "DebugInvestigationRequest",
  "type": "object"
}
